{
	"info": {
		"_postman_id": "bank-microservices-collection",
		"name": "Banking Microservices - Credit Applications",
		"description": "Colección completa para probar el registro de préstamos en diferentes bancos y agregación a través del gateway",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Crear Aplicaciones en Bancos",
			"item": [
				{
					"name": "Crear Préstamo en Bancolombia",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": \"USR001\",\n  \"amount\": 5000000.0\n}"
						},
						"url": {
							"raw": "http://localhost:8083/api/applications",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications"
							]
						},
						"description": "Crea una solicitud de préstamo en Bancolombia para el usuario USR001 por $5.000.000"
					},
					"response": []
				},
				{
					"name": "Crear Préstamo en Davivienda",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": \"USR001\",\n  \"amount\": 3000000.0\n}"
						},
						"url": {
							"raw": "http://localhost:8082/api/applications",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"api",
								"applications"
							]
						},
						"description": "Crea una solicitud de préstamo en Davivienda para el usuario USR001 por $3.000.000"
					},
					"response": []
				},
				{
					"name": "Crear Préstamo en Coltefinanciera",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": \"USR001\",\n  \"amount\": 7500000.0\n}"
						},
						"url": {
							"raw": "http://localhost:8081/api/applications",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"api",
								"applications"
							]
						},
						"description": "Crea una solicitud de préstamo en Coltefinanciera para el usuario USR001 por $7.500.000"
					},
					"response": []
				},
				{
					"name": "Crear Segundo Préstamo en Bancolombia",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"userId\": \"USR001\",\n  \"amount\": 2000000.0\n}"
						},
						"url": {
							"raw": "http://localhost:8083/api/applications",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications"
							]
						},
						"description": "Crea una segunda solicitud de préstamo en Bancolombia para el usuario USR001 por $2.000.000"
					},
					"response": []
				}
			],
			"description": "Endpoints para crear solicitudes de préstamo directamente en cada banco"
		},
		{
			"name": "2. Gateway - Consultar Agregado",
			"item": [
				{
					"name": "Obtener Todas las Aplicaciones del Usuario (Gateway)",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer dummy-token-for-testing",
								"description": "Token JWT (no necesario en modo test)"
							}
						],
						"url": {
							"raw": "http://localhost:8090/api/applications/user/USR001",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"api",
								"applications",
								"user",
								"USR001"
							]
						},
						"description": "Obtiene TODAS las aplicaciones del usuario USR001 agregadas desde todos los bancos (Bancolombia, Davivienda y Coltefinanciera) a través del gateway"
					},
					"response": []
				}
			],
			"description": "Endpoints del gateway que agregan información de todos los bancos"
		},
		{
			"name": "3. Consultas Directas por Banco",
			"item": [
				{
					"name": "Bancolombia - Aplicaciones por Usuario",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/api/applications/user/USR001",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications",
								"user",
								"USR001"
							]
						},
						"description": "Consulta solo las aplicaciones de Bancolombia para USR001"
					},
					"response": []
				},
				{
					"name": "Davivienda - Aplicaciones por Usuario",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8082/api/applications/user/USR001",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"api",
								"applications",
								"user",
								"USR001"
							]
						},
						"description": "Consulta solo las aplicaciones de Davivienda para USR001"
					},
					"response": []
				},
				{
					"name": "Coltefinanciera - Aplicaciones por Usuario",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/api/applications/user/USR001",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"api",
								"applications",
								"user",
								"USR001"
							]
						},
						"description": "Consulta solo las aplicaciones de Coltefinanciera para USR001"
					},
					"response": []
				},
				{
					"name": "Bancolombia - Todas las Aplicaciones",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/api/applications",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications"
							]
						},
						"description": "Lista todas las aplicaciones de Bancolombia"
					},
					"response": []
				},
				{
					"name": "Davivienda - Todas las Aplicaciones",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8082/api/applications",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"api",
								"applications"
							]
						},
						"description": "Lista todas las aplicaciones de Davivienda"
					},
					"response": []
				},
				{
					"name": "Coltefinanciera - Todas las Aplicaciones",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/api/applications",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"api",
								"applications"
							]
						},
						"description": "Lista todas las aplicaciones de Coltefinanciera"
					},
					"response": []
				}
			],
			"description": "Consultas directas a cada banco sin pasar por el gateway"
		},
		{
			"name": "4. Actualizar Estado de Aplicaciones",
			"item": [
				{
					"name": "Bancolombia - Aprobar Aplicación",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"APPROVED\",\n  \"notes\": \"Préstamo aprobado después de revisión crediticia\"\n}"
						},
						"url": {
							"raw": "http://localhost:8083/api/applications/1/status",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications",
								"1",
								"status"
							]
						},
						"description": "Actualiza el estado de una aplicación a APPROVED"
					},
					"response": []
				},
				{
					"name": "Davivienda - Rechazar Aplicación",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"REJECTED\",\n  \"notes\": \"Score crediticio insuficiente\"\n}"
						},
						"url": {
							"raw": "http://localhost:8082/api/applications/1/status",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"api",
								"applications",
								"1",
								"status"
							]
						},
						"description": "Actualiza el estado de una aplicación a REJECTED"
					},
					"response": []
				},
				{
					"name": "Coltefinanciera - Poner en Revisión",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"UNDER_REVIEW\",\n  \"notes\": \"Solicitud en proceso de revisión\"\n}"
						},
						"url": {
							"raw": "http://localhost:8081/api/applications/1/status",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"api",
								"applications",
								"1",
								"status"
							]
						},
						"description": "Actualiza el estado de una aplicación a UNDER_REVIEW"
					},
					"response": []
				}
			],
			"description": "Endpoints para actualizar el estado de las solicitudes de préstamo"
		},
		{
			"name": "5. Health Checks",
			"item": [
				{
					"name": "Gateway Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8090/actuator/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8090",
							"path": [
								"actuator",
								"health"
							]
						},
						"description": "Verifica el estado del Gateway"
					},
					"response": []
				},
				{
					"name": "Bancolombia Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"health"
							]
						},
						"description": "Verifica el estado de Bancolombia"
					},
					"response": []
				},
				{
					"name": "Davivienda Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8082/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8082",
							"path": [
								"health"
							]
						},
						"description": "Verifica el estado de Davivienda"
					},
					"response": []
				},
				{
					"name": "Coltefinanciera Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8081/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8081",
							"path": [
								"health"
							]
						},
						"description": "Verifica el estado de Coltefinanciera"
					},
					"response": []
				}
			],
			"description": "Endpoints para verificar el estado de salud de todos los servicios"
		},
		{
			"name": "6. Otros Endpoints Útiles",
			"item": [
				{
					"name": "Contar Aplicaciones de Usuario en Bancolombia",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/api/applications/user/USR001/count",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications",
								"user",
								"USR001",
								"count"
							]
						},
						"description": "Cuenta las aplicaciones del usuario en Bancolombia"
					},
					"response": []
				},
				{
					"name": "Bancolombia - Aplicaciones por Estado PENDING",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/api/applications/status/PENDING",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications",
								"status",
								"PENDING"
							]
						},
						"description": "Obtiene todas las aplicaciones en estado PENDING"
					},
					"response": []
				},
				{
					"name": "Bancolombia - Aplicaciones por Estado APPROVED",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/api/applications/status/APPROVED",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications",
								"status",
								"APPROVED"
							]
						},
						"description": "Obtiene todas las aplicaciones en estado APPROVED"
					},
					"response": []
				},
				{
					"name": "Obtener Aplicación por ID - Bancolombia",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/api/applications/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications",
								"1"
							]
						},
						"description": "Obtiene una aplicación específica por ID"
					},
					"response": []
				},
				{
					"name": "Eliminar Aplicación - Bancolombia",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "http://localhost:8083/api/applications/1",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8083",
							"path": [
								"api",
								"applications",
								"1"
							]
						},
						"description": "Elimina una aplicación específica"
					},
					"response": []
				}
			],
			"description": "Otros endpoints útiles para gestión de aplicaciones"
		}
	],
	"variable": [
		{
			"key": "gateway_url",
			"value": "http://localhost:8090",
			"type": "string"
		},
		{
			"key": "bancolombia_url",
			"value": "http://localhost:8083",
			"type": "string"
		},
		{
			"key": "davivienda_url",
			"value": "http://localhost:8082",
			"type": "string"
		},
		{
			"key": "coltefinanciera_url",
			"value": "http://localhost:8081",
			"type": "string"
		},
		{
			"key": "test_user_id",
			"value": "USR001",
			"type": "string"
		}
	]
}
